# Deploy Examples

The [**deploy-examples**](https://github.com/hummingbot/deploy-examples) repository provides various examples of how to deploy Hummingbot using Docker. Using Docker for Hummingbot deployment offers several benefits, such as simplifying the installation process, enabling easy versioning and scaling, and ensuring a consistent and isolated environment for running the bot.

These examples are intended for developers and traders who want to deploy Hummingbot using Docker and explore its features and capabilities. Contributions are welcome, and users are encouraged to share their own examples and use cases for deploying Hummingbot with Docker.

To clone the `deploy-examples` repository, open a terminal and use the command:

```
git clone https://github.com/hummingbot/deploy-examples
```

## **Bash Scripts**

The followings scripts assume that [Docker](https://www.docker.com/) has already been installed.

They also assume that the user has Docker permissions without requiring `sudo` and permissions to run the files with `.sh` extension. If not then open a terminal within the folder that contains the scripts and then run the following commands in the terminal:

```
sudo usermod -a -G docker $USER
```

```
chmod a+x *.sh
```

Log out or exit out of the terminal and then open it back up for the changes to take effect

### Create an instance of Hummingbot

The `hummingbot-create.sh` script will create the folders needed to run Hummingbot and then install Hummingbot.

```
./hummingbot-create.sh
```

### Start up / connect to an instance of Hummingbot

The `hummingbot-start.sh` script will connect to a running instance of Hummingbot.

```
./hummingbot-start.sh
```

### Updating Hummingbot version

The `hummingbot-update.sh` script will update your instance to the latest version of Hummingbot.

```
./hummingbot-update.sh
```

### Create Gateway Instance

The `gateway-create.sh` script helps you pull, configure, and run the Gateway Docker image.

```
./gateway-create.sh
```

### Copy Hummingbot Certs

If you didn't do this step during `gateway-create.sh`, the `gateway-copy-certs.sh` script helps you copy the SSL certificates generated by Hummingbot into your Gateway files `certs` folder. This lets your Hummingbot instance access Gateway securely.

```
./gateway-copy-certs.sh
```

## **Using Docker Compose**

`Docker Compose` is a tool that allows you to define and run multiple Docker containers as a single application.

Think of it like a recipe for a multi-layered cake. Each layer of the cake is like a different container in Docker, such as a web server, a database, and an API. Docker Compose provides a way to define how these containers should be configured and connected to each other, so that when you run the application, all of the containers start up together and work seamlessly.

With Docker Compose, you can define the settings for each container in a `YAML` file, including things like the image to use, the ports to expose, and any environment variables or volumes that should be attached. Once you've defined your configuration file, you can use the `docker-compose up` command to start all of the containers in the application.

This article aims to help users get started with deploying Hummingbot using Docker by providing different examples that demonstrate how to set up and customize the bot according to their needs. You can find the official Docker Compose documentation [here](https://docs.docker.com/compose/compose-file/)

!!! tip
    By default, the docker-compose files use the `hummingbot/hummingbot:latest` and `hummingbot/gateway:latest` images to create the containers.

    If you are using a machine with an ARM procesor, like a Mac with an M1 or M2 chip, we strongly recommend build a local Hummingbot image instead by cloning the official repository and running the command
  
    ```
    docker build -f Dockerfile.arm -t hummingbot/hummingbot:arm .
    ```
    
    Once the image is built, then replace `hummingbot/hummingbot:latest` with `hummingbot/hummingbot:arm` instead in the yml files
  
---

### **Scenario 1 - Single Hummingbot Instance**

Create a new file using your favorite text editor or IDE and name it `docker-compose.yml`

Add the following code to the `docker-compose.yml` file:

```yml linenums="1"
version: "3.9"
services:
  bot:
    container_name: hummingbot_instance
    image: hummingbot/hummingbot:latest
    volumes:
      - "./hummingbot_files/conf:/conf"
      - "./hummingbot_files/conf/connectors:/conf/connectors"
      - "./hummingbot_files/conf/strategies:/conf/strategies"
      - "./hummingbot_files/logs:/logs"
      - "./hummingbot_files/data:/data"
      - "./hummingbot_files/scripts:/scripts"
      - "./hummingbot_files/certs:/certs"
    logging:
      driver: "json-file"
      options:
          max-size: "10m"
          max-file: 5
    tty: true
    stdin_open: true
    network_mode: host
```

!!! abstract "Quick overview of the docker compose file"
    This docker-compose file defines a service named "bot" which will pull the "latest" Docker image of Hummingbot. You can change the tag to run the "development" version if needed.

    The service is configured to use the `hummingbot/hummingbot` Docker image and has several volumes mounted for storing configuration files, logs, data, scripts, and certificates. Docker will automatically create the volumes if they don't already exist. If you already have existing folders you would like to use then you can change the volumes path instead to the correct path to the folders that has the existing config files. 

    The `logging` section specifies that logs should be saved as JSON files with a maximum size of 10 megabytes and a maximum of 5 files.

    The `tty` and `stdin_open` settings enable the service to be run in interactive mode, and the `network_mode` is set to "host" so that the container can access the host network.

    The `container_name` property sets the name of the container to "hummingbot_instance".

To run a single Hummingbot instance just open up a terminal in the folder where you have the `docker-compose.yml` file and then run the following code below:

```
docker compose up -d

```

The docker instance should now be running in the background and to attach to the instance run:

```
docker attach hummingbot_instance
```

To exit the instance but keep it running in the background press <kbd>CTRL</kbd> <kbd> P </kbd> + <kbd>CTRL</kbd> <kbd> Q </kbd>

To stop and remove the container run the command:

```
docker compose down
```

---

### **Scenario 2 - Autostart Hummingbot Instance**

To autostart Hummingbot we just need to add the following lines to our Docker compose file

```yml
   environment:
      - CONFIG_PASSWORD=a
      - CONFIG_FILE_NAME=format_status.py

```

!!! note
    Replace the `"a"` in the `CONFIG_PASSWORD` to whatever passphrase you had set (if you already configured Hummingbot previously)
    For `CONFIG_FILE_NAME` this will be the name of the strategy or script you want to autostart.

    If you are autostarting a strategy make sure you have the  strategy config `(.yml)` file in the proper folder `hummingbot_files/conf/strategies` and for a script make sure you have the `(.py)` file under the `hummingbot_files/scripts` folder

The result should now be:

```yml linenums="1" hl_lines="14 15 16"
version: "3.9"
services:
  bot:
    container_name: hummingbot_instance
    image: hummingbot/hummingbot:latest
    volumes:
      - "./hummingbot_files/conf:/conf"
      - "./hummingbot_files/conf/connectors:/conf/connectors"
      - "./hummingbot_files/conf/strategies:/conf/strategies"
      - "./hummingbot_files/logs:/logs"
      - "./hummingbot_files/data:/data"
      - "./hummingbot_files/scripts:/scripts"
      - "./hummingbot_files/certs:/certs"
    environment:
      - CONFIG_PASSWORD=a
      - CONFIG_FILE_NAME=format_status.py
    logging:
      driver: "json-file"
      options:
          max-size: "10m"
          max-file: 5
    tty: true
    stdin_open: true
    network_mode: host
```

To deploy the instance run the following command:

```
docker compose up -d

```

The docker instance should now be running in the background and to attach to the instance run:

```
docker attach hummingbot_instance
```

Once you attach to the instance, the bot should already be running the strategy or script you specified.

To exit the instance but keep it running in the background press <kbd>CTRL</kbd> <kbd> P </kbd> + <kbd>CTRL</kbd> <kbd> Q </kbd>

To stop and remove the container run the command:

```
docker compose down
```

---

### **Scenario 3 - Hummingbot + Gateway**

Add the following code to create the gateway:

```bash
  gateway:
    container_name: hummingbot_gateway
    image: hummingbot/gateway:latest
    ports:
      - "15888:15888"
      - "8080:8080"
    volumes:
      - "./gateway_files/conf:/usr/src/app/conf"
      - "./gateway_files/logs:/usr/src/app/logs"
      - "./hummingbot_files/certs:/usr/src/app/certs"
    environment:
      - GATEWAY_PASSPHRASE=a

```

!!! note
    The `GATEWAY_PASSPHRASE` needs to match the Hummingbot passphrase
    Also, under volumes, make sure the `./hummingbot_files/certs` folder is where the gateway certs are located. If not, then change it to the correct folder location path

The result should now be:

```yml linenums="1" hl_lines="22 23 24 25 26 27 28 29 30 31 32 33"
version: "3.9"
services:
  bot:
    container_name: hummingbot_instance
    image: hummingbot/hummingbot:latest
    volumes:
      - "./hummingbot_files/conf:/conf"
      - "./hummingbot_files/conf/connectors:/conf/connectors"
      - "./hummingbot_files/conf/strategies:/conf/strategies"
      - "./hummingbot_files/logs:/logs"
      - "./hummingbot_files/data:/data"
      - "./hummingbot_files/scripts:/scripts"
      - "./hummingbot_files/certs:/certs"
    logging:
      driver: "json-file"
      options:
          max-size: "10m"
          max-file: 5
    tty: true
    stdin_open: true
    network_mode: host
  gateway:
    container_name: hummingbot_gateway
    image: hummingbot/gateway:latest
    ports:
      - "15888:15888"
      - "8080:8080"
    volumes:
      - "./gateway_files/conf:/usr/src/app/conf"
      - "./gateway_files/logs:/usr/src/app/logs"
      - "./hummingbot_files/certs:/usr/src/app/certs"
    environment:
      - GATEWAY_PASSPHRASE=a
```

**Do you already have the Gateway certificates?**

??? summary "I already have the certs for Gateway and Hummingbot in the correct folder "
    If you already have the Gateway certs generated and added under the `hummingbot_files/certs` folder and the Gateway passphrase set correctly in the `yml` file then we are ready to deploy the Gateway and Hummingbot. Run the steps below to deploy

??? summary "I don't have the Gateway certs generated yet"
    If this is the first time you are running Gateway or you don't have the certs yet don't worry, you can generate them with the client by doing the following:

    ```
    docker-compose up -d
    ```
    
    You will see that the gateway failed to start because you don't have the certificates
    
    Attach the instance of the bot by running:
    
    ```
    docker attach hummingbot_instance
    ```
    
    Create the password
    
    Run the following command in the client:
    
    ```
    gateway generate-certs
    ```
    
    If you run into a permissions error creating the certs then you may need to grant permissions to the Gateway conf and Hummingbot certs folder. You can use the following commands below to adjust the permissions
    
    ```
    chmod a+rw hummingbot_files/certs
    chmod a+rw gateway_files/conf
    chmod a+rw gateway_files/logs
    ```

    When prompted enter the passphrase that you want. Is important that you change the `docker-compose.yml` on line 33 to the passphrase that you entered (the current passphrase is **"a"**).
    
    Exit the client and run the following command in the terminal:
    
    ```
    docker compose down
    ```
    
    You will see that inside the `hummingbot_files/certs` folder you have the certificates and we're now ready to deploy

To deploy Hummingbot + Gateway run the following commands:

```
docker compose up -d
```
  
Run the following command to attach to the Hummingbot instance - check if the Gateway status shows "ONLINE" as well:

```
docker attach hummingbot_instance
```

To exit any instance but keep it running in the background press <kbd>CTRL</kbd> <kbd> P </kbd> + <kbd>CTRL</kbd> <kbd> Q </kbd>

To attach to the Gateway instance run:
  
```
docker attach hummingbot_gateway
```

It's not necessary to attach to the Gateway instance though, although if you do connect to the Gateway instance there is no way to currently exit out unless you close the terminal.

Once you're done just run the down command and it will remove both Hummingbot and the Gateway container

```
docker compose down
```

---

### **Scenario 4 - Multiple Hummingbot instances**

Duplicate lines 3 - 25 of the original docker compose file to create a new bot. Multiple bots can use the same folders but it's recommended to have separate folders for each bot so they have individual configs as well. You can add as many bots as needed. Change "bot" to "bot2" and the `container_name` to `hummingbot_instance2` or whatever name you prefer for the instance. If you want the bots to have separate folders then change `hummingbot_files` to `hummingbot_files2` under volumes. Repeat these steps depending on how many bots you need.

Your `docker-compose.yml` file should now look like this:

```yml linenums="1" hl_lines="22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40"
version: "3.9"
services:
  bot:
    container_name: hummingbot_instance
    image: hummingbot/hummingbot:latest
    volumes:
      - "./hummingbot_files/conf:/conf"
      - "./hummingbot_files/conf/connectors:/conf/connectors"
      - "./hummingbot_files/conf/strategies:/conf/strategies"
      - "./hummingbot_files/logs:/logs"
      - "./hummingbot_files/data:/data"
      - "./hummingbot_files/scripts:/scripts"
      - "./hummingbot_files/certs:/certs"
    logging:
      driver: "json-file"
      options:
          max-size: "10m"
          max-file: 5
    tty: true
    stdin_open: true
    network_mode: host
  bot2:
    container_name: hummingbot_instance2
    image: hummingbot/hummingbot:latest
    volumes:
      - "./hummingbot_files/conf:/conf"
      - "./hummingbot_files/conf/connectors:/conf/connectors"
      - "./hummingbot_files/conf/strategies:/conf/strategies"
      - "./hummingbot_files/logs:/logs"
      - "./hummingbot_files/data:/data"
      - "./hummingbot_files/scripts:/scripts"
      - "./hummingbot_files/certs:/certs"
    logging:
      driver: "json-file"
      options:
          max-size: "10m"
          max-file: 5
    tty: true
    stdin_open: true
    network_mode: host
```

To deploy multiple Hummingbot instances run the following command:

```
docker compose up -d

```

The docker instance should now be running in the background and to attach to the instance run:

```
docker attach [instance_name]
```

Replace `[instance_name]` with the name of the instance you want to attach to

To exit the instance but keep it running in the background press <kbd>CTRL</kbd> <kbd> P </kbd> + <kbd>CTRL</kbd> <kbd> Q </kbd>

To stop and remove all  the instances run the command:

```
docker compose down
```

---

### **Scenario 5 - Multiple Hummingbot Instances with Gateway**

Use the `docker-compose.yml` file in the previous example but we'll also use the code for the Gateway bot in `Scenario 3`. Like in the previous scenario you could use the same folder for each bot instance but we recommend you have one folder for each bot. However, the `certs` folder that you are sharing between the gateway and the bots should be the same.

```yml linenums="1" hl_lines="41 42 43 44 45 46 47 48 49 50 51 52"
version: "3.9"
services:
  bot:
    container_name: hummingbot_instance
    image: hummingbot/hummingbot:latest
    volumes:
      - "./hummingbot_files/conf:/conf"
      - "./hummingbot_files/conf/connectors:/conf/connectors"
      - "./hummingbot_files/conf/strategies:/conf/strategies"
      - "./hummingbot_files/logs:/logs"
      - "./hummingbot_files/data:/data"
      - "./hummingbot_files/scripts:/scripts"
      - "./hummingbot_files/certs:/certs"
    logging:
      driver: "json-file"
      options:
          max-size: "10m"
          max-file: 5
    tty: true
    stdin_open: true
    network_mode: host
  bot2:
    container_name: hummingbot_instance2
    image: hummingbot/hummingbot:latest
    volumes:
      - "./hummingbot_files/conf:/conf"
      - "./hummingbot_files/conf/connectors:/conf/connectors"
      - "./hummingbot_files/conf/strategies:/conf/strategies"
      - "./hummingbot_files/logs:/logs"
      - "./hummingbot_files/data:/data"
      - "./hummingbot_files/scripts:/scripts"
      - "./hummingbot_files/certs:/certs"
    logging:
      driver: "json-file"
      options:
          max-size: "10m"
          max-file: 5
    tty: true
    stdin_open: true
    network_mode: host
  gateway:
    container_name: hummingbot_gateway
    image: hummingbot/gateway:latest
    ports:
      - "15888:15888"
      - "8080:8080"
    volumes:
      - "./gateway_files/conf:/usr/src/app/conf"
      - "./gateway_files/logs:/usr/src/app/logs"
      - "./hummingbot_files/certs:/usr/src/app/certs"
    environment:
      - GATEWAY_PASSPHRASE=a
```

**Do you already have the Gateway certificates?**

??? summary "I already have the certs for Gateway and Hummingbot in the correct folder "
    If you already have the Gateway certs generated and added under the `hummingbot_files/certs` folder and the Gateway passphrase set correctly in the `yml` file then we are ready to deploy the Gateway and Hummingbot. Run the steps below to deploy

??? summary "I don't have the Gateway certs generated yet"
    If this is the first time you are running Gateway or you don't have the certs yet don't worry, you can generate them with the client by doing the following:

    ```
    docker compose up -d
    ```
    
    You will see that the gateway failed to start because you don't have the certificates
    
    Attach the instance of the bot by running:
    
    ```
    docker attach hummingbot_instance
    ```
    
    Create the password
    
    Run the following command in the client:
    
    ```
    gateway generate-certs
    ```
        
    If you run into a permissions error creating the certs then you may need to grant permissions to the Gateway conf and Hummingbot certs folder. You can use the following commands below to adjust the permissions
    
    ```
    chmod a+rw hummingbot_files/certs
    chmod a+rw gateway_files/conf
    chmod a+rw gateway_files/logs
    ```

    When prompted enter the passphrase that you want. Is important that you change the `docker-compose.yml` on line 33 to the passphrase that you entered (the current passphrase is **"a"**).
    
    Exit the client and run the following command in the terminal:
    
    ```
    docker compose down
    ```
    
    You will see that inside the `hummingbot_files/certs` folder you have the certificates and we're now ready to deploy

To deploy Hummingbot + Gateway run the following commands:

```
docker compose up -d
```
  
Run the following command to attach to the Hummingbot instance - check if the Gateway status shows "ONLINE" as well:

```
docker attach [instance_name]
```

Replace `[instance_name]` with the name of the instance you want to connect to

To exit any instance but keep it running in the background press <kbd>CTRL</kbd> <kbd> P </kbd> + <kbd>CTRL</kbd> <kbd> Q </kbd>

To attach to the Gateway instance run:
  
```
docker attach hummingbot_gateway
```

It's not necessary to attach to the Gateway instance though, although if you do connect to the Gateway instance there is no way to currently exit out unless you close the terminal.

Once you're done just run the down command and it will remove all Hummingbot instances and the Gateway container

```
docker compose down
```

---

!!! tip "**Optional Exercise:**"
    You are not limited to only the scenarios listed above. Try using Docker Compose for additional other scenarios like autostarting multiple Hummingbot instances or autostarting multiple Hummingbot instances with Gateway.
